import{ae as q,ay as A,a3 as j,a4 as I,ad as L,x as D,A as N,af as F,a5 as n,ag as p,c as e,a7 as a,az as M,Y as g,ac as P,ah as r,ap as f,a6 as y,aj as R,ao as V,X as T,ab as $,aw as E,ax as H}from"./index-c8844608.js";import{c as z,e as O,u as U,d as X}from"./index.esm-50a14928.js";import{a as x,V as o}from"./VCol-a6f78378.js";import{V as d}from"./VRow-d7318132.js";import{V as Y,a as G}from"./VCarouselItem-03a99f3e.js";import{V as J}from"./VSheet-b91caaf5.js";import"./VWindowItem-82720008.js";import"./ssrBoot-f5a5cd50.js";const w=i=>(E("data-v-fc5468c4"),i=i(),H(),i),K={class:"d-flex fill-height justify-center align-center"},Q=w(()=>r("div",{class:"text-h2"},null,-1)),W=["src"],Z=w(()=>r("h1",{class:"text-red text-h1"},"已下架",-1)),ee={__name:"ArticleView",setup(i){const b=A(),h=j(),{api:S,apiAuth:k}=P(),m=I(),v=L(),s=D({_id:"",title:"",author:"",description:"",date:"",image:"",sell:!0,category:""}),C=z({quantity:O().typeError("缺少數量").required("缺少數量").min(1,"數量最小為 1")}),{isSubmitting:te,handleSubmit:B}=U({validationSchema:C,initialValues:{quantity:1}});return X("quantity"),B(async u=>{var c,t;if(!v.isLogin){h.push("/login");return}try{const{data:l}=await k.patch("/users/cart",{product:product.value._id,quantity:u.quantity});v.cart=l.result,m({text:"新增成功",showCloseButton:!1,snackbarProps:{timeout:2e3,color:"green",location:"bottom"}})}catch(l){const _=((t=(c=l==null?void 0:l.response)==null?void 0:c.data)==null?void 0:t.message)||"發生錯誤，請稍後再試";m({text:_,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}})}}),N(async()=>{var u,c;try{const{data:t}=await S.get("/articles/"+b.params.id);s.value._id=t.result._id,s.value.title=t.result.title,s.value.author=t.result.author,s.value.date=t.result.date,s.value.description=t.result.description,s.value.image=t.result.image,s.value.sell=t.result.sell,s.value.category=t.result.category,document.title=`卡底家 | ${s.value.title}`}catch(t){const l=((c=(u=t==null?void 0:t.response)==null?void 0:u.data)==null?void 0:c.message)||"發生錯誤，請稍後再試";m({text:l,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}}),h.push("/")}}),(u,c)=>{const t=F("Div");return n(),p(g,null,[e(x,{class:"custom-fon"},{default:a(()=>[e(d,{class:"custom-font d-flex justify-center align-center"},{default:a(()=>[e(o,{cols:"2"}),e(o,{cols:"8"},{default:a(()=>[r("h1",null,f(s.value.title),1)]),_:1}),e(o,{cols:"2"})]),_:1})]),_:1}),e(d,{class:"ma-0 pa-0"},{default:a(()=>[e(o,{cols:"12"},{default:a(()=>[s.value.image.length>0?(n(),y(Y,{key:0,height:"400","show-arrows":"hover"},{default:a(()=>[(n(!0),p(g,null,R(s.value.image,(l,_)=>(n(),y(G,{key:_},{default:a(()=>[e(J,{height:"100%"},{default:a(()=>[r("div",K,[Q,l?(n(),p("img",{key:0,src:l},null,8,W)):V("",!0)])]),_:2},1024)]),_:2},1024))),128))]),_:1})):V("",!0)]),_:1})]),_:1}),e(x,{class:"custom-font mb-6"},{default:a(()=>[e(d,null,{default:a(()=>[e(o,{cols:"2"}),e(o,{cols:"4"},{default:a(()=>[r("p",null,"作者："+f(s.value.author),1)]),_:1}),e(o,{cols:"4"},{default:a(()=>[r("p",null,f(new Date(s.value.date).toLocaleString()),1)]),_:1}),e(o,{cols:"2"})]),_:1}),e(d,null,{default:a(()=>[e(o,{cols:"2"}),e(o,{cols:"8"},{default:a(()=>[e(t,{class:"d-flex justify-center align-center mb-6"},{default:a(()=>[e(t,{innerHTML:s.value.description},null,8,["innerHTML"])]),_:1})]),_:1}),e(o,{cols:"2"})]),_:1})]),_:1}),e(M,{class:"align-center justify-center text-center","model-value":!s.value.sell,persistent:""},{default:a(()=>[Z,e(T,{to:"/",color:"green"},{default:a(()=>[$("回首頁")]),_:1})]),_:1},8,["model-value"])],64)}}},ie=q(ee,[["__scopeId","data-v-fc5468c4"]]);export{ie as default};
